@(types:String)(implicit session: Session)
@home.main("SoftsCenter"){

    <link rel="stylesheet" type="text/css" href="@routes.Assets.versioned("mycss/index.css")" media="screen" />

    <script type="text/javascript" src="@routes.Assets.versioned("js/jquery-ui.js")"></script>

    <style>
            .ui-widget-content, .ui-widget-content a:hover {
                color: #333333;
            }
            form {
                position: relative;
            }
            .searchbox input {
                width: 350px;
                border-radius: 33px;
                border: none;
                height: 40px;
                padding-left: 20px;
                padding-right: 40px;
                letter-spacing: 0;
                background: #ffffff;
            }
            .searchbox i {
                position: absolute;
                right: 80px;
                top: 20px;
                font-size: 14px;
                color: #b1a7a7;
            }
            [class^="ti-"], [class*=" ti-"] {
                font-family: 'themify';
                speak: none;
                font-style: normal;
                font-weight: normal;
                font-variant: normal;
                text-transform: none;
                line-height: 1;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }
            .mws-report .mws-report-content {
                width: 65%;
                height: 80%;
                position: relative;
                margin-left: 30%;
                margin-top: 25px;
                display: block;
                padding: 3px 0px 8px 10px;
            }
            ul#all li, ul#like li, ul#function li, ul#cluster li, ul#paint li, ul#check li, ul#predict li, ul#sequence li, ul#annotation li, ul#chart li, ul#search li {
                float: left;
                margin: 8px;
                padding: 4px 0px 4px 11px;
            }
            .ui-tabs .ui-tabs-nav li a:hover {
                background: #00000014;
            }
            .icon-star-empty{
                color: #323232;
            }
            .icon-star{
                color: #ff9c00;
            }
            .waiting{
                background: #eee!important;
                border: lightgray!important;
            }
            .search-btn{
                color: white;
                text-shadow: unset;
                background-color: #036;
                border-color: #036;
            }
            .search-btn:hover{
                color: white;
                background-color: #036;
            }

    </style>

    <div class="container mainpadding" style="margin-top: 10px!important;">
        <div class="mws-panel grid_8">
            <div class="mws-tabs">
                <div style="height: 50px; margin-left: 25px; margin-top: 10px">
                    <div style="width: 100%;float: left">
                        <ul>
                            <li><a id="li_like" href="#likelist" onclick="loadSoft('like')">我的收藏</a></li>
                            <li><a id="li_allsoft" href="#alllist" onclick="loadSoft('all')">所有软件</a></li>
                            <li><a id="li_function" href="#funlist" onclick="loadSoft('function')">功能分析</a></li>
                            <li><a id="li_cluster" href="#clulist" onclick="loadSoft('cluster')">聚类分析</a></li>
                            <li><a id="li_paint" href="#paintlist" onclick="loadSoft('paint')">基础绘图</a></li>
                            <li><a id="li_check" href="#checklist" onclick="loadSoft('check')">统计检验与差异分析</a></li>
                            <li><a id="li_predict" href="#predictlist" onclick="loadSoft('predict')">菌群功能分析</a></li>
                            <li><a id="li_sequence" href="#seqlist" onclick="loadSoft('sequence')">序列处理</a></li>
                            <li><a id="li_annotation" href="#annolist" onclick="loadSoft('annotation')">注释工具</a></li>
                            <li><a id="li_chart" href="#chartlist" onclick="loadSoft('chart')">表格与格式转化</a></li>
                            <li style="display: none"><a id="li_search" href="#searchlist">search</a></li>
                        </ul>
                    </div>

                    <div style="width: 100%;margin-top: 20px;float: left;">
                        <div class="input-group" style="width: 260px;float: left;margin-left: 20px">
                            <input id="searchbar" type="text" class="form-control" placeholder="">
                            <span class="input-group-btn">
                                <button class="btn btn-default search-btn" type="button" onclick="searchsoft()">
                                    搜  索
                                </button>
                            </span>
                        </div>
                    </div>
                </div>

                <div id="likelist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="like" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="alllist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="all" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="funlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="function" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="clulist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="cluster" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="paintlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="paint" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="checklist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="check" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="predictlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="predict" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="seqlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="sequence" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="annolist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="annotation" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="chartlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="chart" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
                <div id="searchlist" style="padding: 1em 0em 1em 1em;float: left;">
                    <ul id="search" class="ui-widget ui-helper-clearfix">
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>

            $(document).ready(function () {
                $("#@types").click();
                loadSoft("@types".substring(3));
            });


            $('#searchbar').keydown(function(e){
                var curKey = e.which;
                if (curKey == 13) {
                    searchsoft();
                }
            });

            function searchsoft(){
                var parm=$("#searchbar").val();
                if(parm!=""){
                    $("#li_search").click();
                    loadSoft("search",parm);
                }
            }

            function loadSoft(param,content){
                if(@session.get("userId").isEmpty && param=="like") openSignin();
                removeul(param);
                var url="";
                if(param=="all") url = "/CloudPlatform/Softwares/home/alllist";
                else if(param=="like") url = "/CloudPlatform/Softwares/home/likelist";
                else if(param=="search") url = "/CloudPlatform/Softwares/home/search?search="+content;
                else url = "/CloudPlatform/Softwares/home/types?types="+param;
                $.ajax({
                    url: url,
                    type: "get",
                    success: function (data) {
                        var html="";
                        if(param=="like" && JSON.stringify(data.rows)=="[]") html="<li><div>暂无收藏</div></li>";
                        else if(param=="search" && JSON.stringify(data.rows)=="[]") html="<li><div>搜索的软件不存在！</div></li>";
                        else if(param!="like" && param!="search" && JSON.stringify(data.rows)=="[]") html="<li><div>功能开发中，敬请期待！</div></li>";
                        else
                            $.each(data.rows,function (i,v) {
                                html += "<li class='mws-report " + v.status + "'>" + v.pics + "<div class='mws-report-content'>" +
                                        "<div class='likeable' style='float:right;'><div id='fmsg1' style='display:none;'>" +
                                        "<div class='tooltip fade left in' style='width: 75px;bottom: 2px;right: 19px;display: block;'>" +
                                        "<div class='tooltip-arrow'></div><div class='tooltip-inner'>点击收藏</div>" +
                                        "</div></div><div id='fmsg2' style='display:none;'>" +
                                        "<div class='tooltip fade left in' style='width: 75px;bottom: 2px;right: 19px;display: block;'>" +
                                        "<div class='tooltip-arrow'></div><div class='tooltip-inner'>取消收藏</div></div></div>" + v.like +
                                        "</div>"+v.description+"</div></li>";
                            });
                        $("#"+param).html(html);
                    }
                });
            }

            function removeul(param){
                $("#"+param+" li").remove();
            }

            function mover($para) {
                if (($para).hasClass("yellow-icon")) {
                    $para.prev().show();
                } else {
                    $para.removeClass('icon-star-empty');
                    $para.addClass('icon-star');
                    $para.prev().prev().show();
                }
            }

            function mout($para) {
                $para.prev().hide();
                $para.prev().prev().hide();
                if (!$para.hasClass("yellow-icon")) {
                    $para.addClass('icon-star-empty');
                    $para.removeClass('icon-star');
                }

            }


            //tab
            $(".mws-tabs").tabs();

            var islock = false;  //防止重复点击
            function collect($para,sid) {
                //没登陆的时候聚焦到登陆框
                if (@session.get("userId").isEmpty) {
                    openSignin();
                    return;
                }
                if (islock) {
                    alert(" =.=!!");
                    return;
                }
                islock = true;
                setTimeout(function () {
                    islock = false;
                }, 200);
                if (($para).hasClass("yellow-icon")) {
                    $.ajax({
                        url: "/CloudPlatform/User/delLike?sid="+sid,
                        type: "post",
                        success: function (data) {
                            swal({
                                title: "已取消收藏该软件",
                                type: "success",
                                confirmButtonText: "确认"
                            });
                            // alert('已取消收藏该软件', 1000);
                            $para.removeClass("icon-star").removeClass("yellow-icon").addClass("icon-star-empty");
                        }
                    });
                } else {
                    $.ajax({
                        url: "/CloudPlatform/User/addLike?sid="+sid,
                        type: "post",
                        success: function (data) {
                            $para.removeClass("icon-heart-empty").addClass("icon-heart yellow-icon");
                            swal({
                                title: "收藏该软件成功",
                                type: "success",
                                confirmButtonText: "确认"
                            });
                            // alert('收藏该软件成功', 1000);
                        }
                    });
                }
            }

            function formValidation() {
                $("#mailSigninForm").formValidation({
                    framework: 'bootstrap',
                    icon: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },
                    fields: {
                        phone: {
                            validators: {
                                notEmpty: {
                                    message: '请输入账号！'
                                }
                            }
                        },
                        code: {
                            validators: {
                                notEmpty: {
                                    message: '请输入验证码！'
                                }
                            }
                        }
                    }
                });
                $("#signinForm").formValidation({
                    framework: 'bootstrap',
                    icon: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },
                    fields: {
                        user: {
                            validators: {
                                notEmpty: {
                                    message: '请输入账号！'
                                }
                            }
                        },
                        password: {
                            validators: {
                                notEmpty: {
                                    message: '请输入密码！'
                                }
                            }
                        },
                        validnumber: {
                            validators: {
                                notEmpty: {
                                    message: '请输入验证码！'
                                },
                                callback: {
                                    message: '验证码错误！',
                                    callback: function () {
                                        return $('#validnumber').val() === code;
                                    }
                                }
                            }
                        }
                    }
                });
                $('#signupForm').formValidation({
                    framework: 'bootstrap',
                    icon: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },
                    fields: {
                        phone: {
                            validators: {
                                notEmpty: {
                                    message: '请输入手机号！'
                                },
                                phone:{
                                    message: '请输入正确手机号',
                                    country: 'CN'
                                }
                            }
                        },
                        name: {
                            validators: {
                                notEmpty: {
                                    message: '请填写姓名！'
                                }
                            }
                        },
                        email: {
                            validators: {
                                notEmpty: {
                                    message: '请填写邮箱地址！'
                                },
                                emailAddress:{
                                    message:'请输入正确邮箱地址！'
                                }
                            }
                        },
                        company: {
                            validators: {
                                notEmpty: {
                                    message: '请填写单位！'
                                }
                            }
                        },
                        password: {
                            validators: {
                                notEmpty: {
                                    message: '请输入密码！'
                                },
                                stringLength: {
                                    min: 6,
                                    message: '请输入至少六位密码！'
                                }
                            }
                        },
                        password1: {
                            validators: {
                                notEmpty: {
                                    message: '请输入确认密码！'
                                },
                                identical: {
                                    field: 'password',
                                    message: '两次密码不一致!'
                                }
                            }
                        },
                        validnumber: {
                            validators: {
                                notEmpty: {
                                    message: "请输入验证码！"
                                }
                            }
                        }
                    }
                });
                $('#passwordForm').formValidation({
                    framework: 'bootstrap',
                    icon: {
                        valid: 'glyphicon glyphicon-ok',
                        invalid: 'glyphicon glyphicon-remove',
                        validating: 'glyphicon glyphicon-refresh'
                    },
                    fields: {
                        password1: {
                            validators: {
                                notEmpty: {
                                    message: '请输入新密码！'
                                },
                                stringLength: {
                                    min: 6,
                                    message: '请输入至少六位密码！'
                                }
                            }
                        },
                        password2: {
                            validators: {
                                notEmpty: {
                                    message: '请输入确认密码！'
                                },
                                identical: {
                                    field: 'password1',
                                    message: '两次密码不一致!'
                                }
                            }
                        },
                        validnumber: {
                            validators: {
                                notEmpty: {
                                    message: "请输入验证码！"
                                }
                            }
                        }
                    }
                });
            }

    </script>

    @home.footer()


}